# Overview

This is a proof of concept, that what was asked for can actually be accomplished. 

Tools used. 

ffmpeg, exiftool (I know I used python, but it is a wrapper around local exiftool)

# Running on your own. 

Download, create a python .venv

source .venv/bin/activate

Then pip install -i < requirements.txt should get you close

### POC details

I have 4 images of a Groundhog, 

We call all our groundhogs Gary. 

They were generated by selected an iphoto album, and exporting. 

Some assumptions, sequential numbering is correlated with sequential creation.

This is usually the case, with iphoto export, but maybe not always. 

If not the files should probably be named so that a lexicographical sort gets us a time sort, or some parsing of exif or pscpt data or the like would get us there. 

Once we have the images in order, we need to get the diff in time in seconds from image 1 to image 2, from image  2 to image 3. 

generate_in2.py does that, it needs tweeking, but more or less there. 

Do not judge my code, yes there should be a function for the time extraction, but I just wanted to dump this to preserve what I have. 

and yes I just let the index out of range fly, by then I had my file, more or less. 

If you run ```generate_in2.py``` for every jpeg file in this folder it will generate a file that looks like this..

```
file gary-1.jpeg
outpoint 0:00:02
file gary-2.jpeg
outpoint 0:00:06
file gary-3.jpeg
outpoint 0:00:14
file gary-4.jpeg
```

Now that file actually has to look like this

```
file gary-1.jpeg
outpoint 2
file gary-2.jpeg
outpoint 6
file gary-3.jpeg
outpoint 14
file gary-4.jpeg
outpoint 2
```


But that is easy enough, I am just tired. 

### Given that formatting file the following command builds the mp4

Stole this from here..

https://stackoverflow.com/questions/24961127/how-to-create-a-video-from-images-with-ffmpeg

Different duration for each image

https://video.stackexchange.com/questions/23530/use-ffmpeg-to-create-a-video-from-a-few-images gives a solution.

DO NOT include a framerate. 

The file generated by the python script is fed to ffmpeg like this.
in this case "in.txt"


ffmpeg -f concat -i in.txt -framerate 1  -c:v libx264 -c:a copy -shortest -r 30 -pix_fmt yuv420p gary2.mp4


### Verify, 

Open gary-1 => 4, and open gary2.mp4, and you should see gary-1 for 2 seconds, gary-2 for 6 seconds, gary-3 for 14 seconds, gary-4 for 2 seconds. 


### some notes

Leaving this here, if we wanted to add audio track

```ffmpeg -f concat -i in.txt -framerate 1 -i orig/audio.ogg -c:v libx264 -c:a copy -shortest -r 30 -pix_fmt yuv420p black.mp4```
